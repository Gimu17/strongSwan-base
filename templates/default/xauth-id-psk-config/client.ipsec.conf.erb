# ipsec.conf - strongSwan IPsec configuration file

config setup
    nat_traversal=<%=   node[:strongswan][:ipsec][:natt] %>
    charonstart=no
    plutostart=yes
    
conn %default
    ikelifetime=60m
    keylife=20m
    rekeymargin=3m
    keyingtries=1
    keyexchange=<%=     node[:strongswan][:ipsec][:keyexchange] %>
    ike=<%=             node[:strongswan][:ipsec][:ike] %>
    esp=<%=             node[:strongswan][:ipsec][:esp] %>
    pfs=no
    authby=secret

conn client
    left=%defaultroute
    leftsourceip=%config
    leftid=<%=          node[:strongswan][:ipsec][:remote][:id] %>
    leftfirewall=yes
    right=<%=           node[:strongswan][:ipsec][:public_ip] %>
    rightsourceip=%any
    rightsubnet=<%=     node[:strongswan][:ipsec][:local][:subnet] %>
    rightid=<%=         node[:strongswan][:ipsec][:local][:id] %>
    auto=start
